# Planning Summary

This directory contains comprehensive planning documentation for the multi-recorder CLI tool.

## What We've Planned

A flexible CLI tool that allows users to:
1. Capture multiple input sources (displays, cameras, microphones)
2. Route them to multiple output files simultaneously
3. Configure sources with varying levels of detail
4. Support both simple CLI usage and complex config files

## Key Innovation: Three-Level Configuration

### Level 1: Simple IDs (Zero JSON)
```bash
cap-multi-recorder record --display 0 output.mp4
```
Perfect for quick recordings with sensible defaults.

### Level 2: Inline JSON Settings
```bash
cap-multi-recorder record \
  --display '{"id":0,"settings":{"fps":60}}' output.mp4
```
Per-source control without creating files.

### Level 3: File References
```bash
cap-multi-recorder record --display @config.json output.mp4
```
Reusable, version-controlled configurations.

### Level 4: Full Config Files
```bash
cap-multi-recorder record streaming-setup.json
```
Complete recording setups with named inputs and outputs.

## Planning Documents

- **[PLAN.md](./PLAN.md)** - Main implementation plan
- **[PLAN-UNIFIED.md](./PLAN-UNIFIED.md)** - Detailed unified approach
- **[PLAN-JSON-CONFIG.md](./PLAN-JSON-CONFIG.md)** - Full config format
- **[INPUT-PATTERNS.md](./INPUT-PATTERNS.md)** - Pattern comparison guide
- **[README.md](./README.md)** - Overview and quick start

## Architecture Highlights

- Built on `cap-recording` crate's `OutputPipeline`
- Nâ†’M routing: any sources to any outputs
- Platform-native encoders (AVFoundation, Media Foundation)
- Shared input sources across outputs
- Independent pipeline control per output

## Example Scenarios

### Screen + Camera + Mic to One File
```bash
cap-multi-recorder record \
  --display 0 recording.mp4 \
  --camera 0 recording.mp4 \
  --microphone "Blue Yeti" recording.mp4
```

### Each Source to Separate File
```bash
cap-multi-recorder record \
  --display 0 screen.mp4 \
  --camera 0 webcam.mp4 \
  --microphone "Blue Yeti" audio.ogg
```

### Complex Multi-Output
```bash
cap-multi-recorder record \
  --display 0 screen.mp4 full.mp4 \
  --camera 0 webcam.mp4 full.mp4 \
  --microphone "Blue Yeti" audio.ogg full.mp4
```
Creates 3 files: screen-only, webcam-only, and combined.

## What's Next

Implementation will follow the phases outlined in PLAN.md:
1. Core infrastructure
2. Input discovery & management  
3. Output pipeline construction
4. Recording control
5. Error handling & validation
6. User experience

See PLAN.md for detailed implementation roadmap.
